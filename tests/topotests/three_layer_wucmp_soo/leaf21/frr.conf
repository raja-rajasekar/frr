int lo
  ip addr 10.0.0.21/32

int leaf21-eth0
  no shut
int leaf21-eth1
  no shut
int leaf21-eth2
  no shut
int leaf21-eth3
  no shut
int leaf21-eth4
  ip addr 192.168.21.1/24
  ip addr 10.21.0.1/24
  ip addr 10.21.1.1/24
  ip addr 10.21.2.1/24
  ip addr 10.21.3.1/24
  no shut

# Add static route for aggregate summary
ip route 21.0.0.0/8 lo

route-map wcmp permit 10
  set extcommunity bandwidth num-multipaths

router bgp 65021
   bgp bestpath as-path multipath-relax
   no bgp ebgp-requires-policy
   timers bgp 1 3
   neighbor leaf21-eth0 interface remote-as external
   neighbor leaf21-eth1 interface remote-as external
   neighbor leaf21-eth2 interface remote-as external
   neighbor leaf21-eth3 interface remote-as external
   address-family ipv4 unicast
      redistribute sharp
      redistribute static
      neighbor leaf21-eth0 route-map wcmp out
      neighbor leaf21-eth1 route-map wcmp out
      neighbor leaf21-eth2 route-map wcmp out
      neighbor leaf21-eth3 route-map wcmp out
      aggregate-address 21.0.0.0/8
!
